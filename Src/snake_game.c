/*
 * snake_game.c
 *
 *  Created on: Jun 2, 2021
 *      Author: ad
 */

#include "snake_game.h"


volatile uint8_t head_row = 0 ;
volatile uint8_t head_column = 0 ;

volatile uint8_t food_row = 0 ;
volatile uint8_t food_column = 0 ;

volatile uint8_t game_status = STOP ;
volatile uint8_t snake_length = 4 ;
volatile uint8_t move_status = WILL_MOVE ;

volatile uint8_t holder = 0 ;
volatile uint8_t holder_row = 0 ;
volatile uint8_t holder_column = 0 ;

volatile uint8_t base[12][21] = {
		// 0th row LSB // 0
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		// 0th row MSB // 1
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

		// 1st row LSB // 2
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		// 1st row MSB // 3
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

		// 2st row LSB // 4
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		// 2st row MSB // 5
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

		// 3rd row LSB // 6
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		// 3rd row MSB // 7
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

		// 4th row LSB // 8
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		// 4th row MSB // 9
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},

		// 5th row LSB // 10
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00},
		// 5th row MSB // 11
		{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
} ;

// 0: 0000 = No direction. No snake.
// 4: 0100	= Direction: right, Snake: Yes
// 5: 0101	= Direction: left,  Snake: Yes
// 6: 0110	= Direction: up,    Snake: Yes
// 7: 0111	= Direction: down,  Snake: Yes
// 8: 1000 = Food

void game_start (void) {

	NVIC_ClearPendingIRQ(EXTI0_IRQn) ;
	NVIC_ClearPendingIRQ(EXTI1_IRQn) ;
	NVIC_ClearPendingIRQ(EXTI2_IRQn) ;
	NVIC_ClearPendingIRQ(EXTI3_IRQn) ;
	__disable_irq() ;
	game_init() ;
	print_screen() ;
	__enable_irq() ;

	while (game_status == STOP) { }

	while (game_status == START) {
		update() ;
		if (snake_length == 252) {
			game_status = WIN ;
		}
	}

	if (game_status == GAME_OVER) {
		delay_ms(500) ;
		game_over_graph() ;
	} else if (game_status == WIN) {
		delay_ms(500) ;
		win_graph() ;
	}
}

void update (void) {
	delay_ms(200) ;
	__disable_irq() ;
	move() ;
	move_status = WILL_MOVE ;
	print_screen() ;
	__enable_irq() ;
	delay_ms(50) ;
}

void move_snake_one_block_without_head (void) {
	uint8_t direction = base[head_row][head_column] ;
	uint8_t row = head_row ;
	uint8_t column = head_column ;

	for (uint8_t foo = 1; foo < snake_length; foo++) {
		switch (direction) {
			case DIRECTION_RIGHT:
				column-- ;
				base[row][column + 1] = direction ;
				direction = base[row][column] ;
				break ;
			case DIRECTION_LEFT:
				column++ ;
				base[row][column - 1] = direction ;
				direction = base[row][column] ;
				break ;
			case DIRECTION_UP:
				row++ ;
				base[row - 1][column] = direction ;
				direction = base[row][column] ;
				break ;
			case DIRECTION_DOWN:
				row-- ;
				base[row + 1][column] = direction ;
				direction = base[row][column] ;
				break ;
		}
	}
	base[row][column] = EMPTLY_BLOCK ;
}

void move_right (void) {
	if (head_column == 20) {
		// will hit the wall
		game_status = GAME_OVER ;
	} else {
		if (base[head_row][head_column + 1] == 0x0) {
			move_snake_one_block_without_head() ;
			head_column++ ;
			base[head_row][head_column] = DIRECTION_RIGHT ;
		} else if (base[head_row][head_column + 1] == FOOD_BLOCK) {
			// valid move
			snake_length++ ;
			head_column++ ;
			base[head_row][head_column] = DIRECTION_RIGHT ;
			set_new_food_position() ;
		} else {
			// snake hits its body.
			game_status = GAME_OVER ;
		}
	}
}
void move_left (void) {
	if (head_column == 0) {
			// will hit the wall
		game_status = GAME_OVER ;
	} else {
		if (base[head_row][head_column - 1] == 0x0) {
			move_snake_one_block_without_head() ;
			head_column-- ;
			base[head_row][head_column] = DIRECTION_LEFT ;
		} else if (base[head_row][head_column - 1] == FOOD_BLOCK) {
			// valid move
			head_column-- ;
			snake_length++ ;
			base[head_row][head_column] = DIRECTION_LEFT ;
			set_new_food_position() ;
		} else {
			// snake hits its body.
			game_status = GAME_OVER ;
		}
	}
}
void move_up (void) {
	if (head_row == 0) {
			// will hit the wall
		game_status = GAME_OVER ;
	} else {
		if (base[head_row - 1][head_column] == 0x0) {
			move_snake_one_block_without_head() ;
			head_row-- ;
			base[head_row][head_column] = DIRECTION_UP ;
		} else if (base[head_row - 1][head_column] == FOOD_BLOCK) {
			// valid move
			head_row-- ;
			snake_length++ ;
			base[head_row][head_column] = DIRECTION_UP ;
			set_new_food_position() ;
		} else {
			// snake hits its body.
			game_status = GAME_OVER ;
		}
	}
}
void move_down (void) {
	if (head_row == 11) {
				// will hit the wall
		game_status = GAME_OVER ;
	} else {
		if (base[head_row + 1][head_column] == 0x0) {
			move_snake_one_block_without_head() ;
			head_row++ ;
			base[head_row][head_column] = DIRECTION_DOWN ;
		} else if (base[head_row + 1][head_column] == FOOD_BLOCK) {
			// valid move
			head_row++ ;
			snake_length++ ;
			base[head_row][head_column] = DIRECTION_DOWN ;
			set_new_food_position() ;
		} else {
			// snake hits its body.
			game_status = GAME_OVER ;
		}
	}
}

void move (void) {
	switch (move_status) {
		case MOVE_DIRECTION_RIGHT:
			move_right() ;
			break ;
		case MOVE_DIRECTION_LEFT:
			move_left() ;
			break ;
		case MOVE_DIRECTION_UP:
			move_up() ;
			break ;
		case MOVE_DIRECTION_DOWN:
			move_down() ;
			break ;
		case WILL_MOVE:
			switch (base[head_row][head_column]) {
				case DIRECTION_RIGHT:
					move_right() ;
					break ;
				case DIRECTION_LEFT:
					move_left() ;
					break ;
				case DIRECTION_UP:
					move_up() ;
					break ;
				case DIRECTION_DOWN:
					move_down() ;
					break ;
			}
			break ;
	}
}

void game_init (void) {
	start_game_graph() ;
	game_status = STOP ;
	move_status = WILL_MOVE ;
	snake_length = 4 ;

	for (uint8_t foo = 0; foo < 12; foo++) {
		for (uint8_t bar = 0; bar < 21; bar++) {
			base[foo][bar] = EMPTLY_BLOCK ;
		}
	}

	uint32_t holder = 0 ;
	while (!(RNG->SR & 0x1)) { }
	holder = RNG->DR ;

	head_row = (holder & 0xFF) % 12 ;
	head_column = (holder & 0xFF00) % 16 + 5 ;

	set_new_food_position() ;

	base[head_row][head_column] = DIRECTION_RIGHT ;
	base[head_row][head_column - 1] = DIRECTION_RIGHT ;
	base[head_row][head_column - 2] = DIRECTION_RIGHT ;
	base[head_row][head_column - 3] = DIRECTION_RIGHT ;
	base[food_row][food_column] = FOOD_BLOCK ;
}

void set_new_food_position (void) {
	// TODO: improve
	volatile uint8_t new_food_row = 0 ;
	volatile uint8_t new_food_column = 0 ;
	do {
		volatile uint32_t holder = 0 ;
		while (!(RNG->SR & 0x1)) { }
		holder = RNG->DR ;

		new_food_row = (holder & 0xFF) % 12 ;
		new_food_column = (holder & 0xFF00) % 21 ;


		if (base[new_food_row][new_food_column] == 0x0) {
			break ;
		}
	} while (1) ;


	food_row = new_food_row ;
	food_column = new_food_column ;
	base[food_row][food_column] = FOOD_BLOCK ;
}

void print_screen (void) {
	LCD_Full_Eraser() ;
	uint8_t holder[504] = { 0 } ;

	for (uint8_t row = 0; row < 12; row++) {
		for (uint8_t column = 0; column < 21; column++) {
			if (row & 1) {
				// MSB
				if ((row == head_row && column == head_column) || (row == food_row && column == food_column)) {
					switch (base[row][column]) {
						case DIRECTION_RIGHT:
							// right
							holder[(row / 2) * 84 + column * 4 + 0] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0x90;
							break ;
						case DIRECTION_LEFT:
							// left
							holder[(row / 2) * 84 + column * 4 + 0] |=  0x90;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0xF0;
							break ;
						case DIRECTION_UP:
							// upper ;
							holder[(row / 2) * 84 + column * 4 + 0] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xE0;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xE0;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0xF0;
							break ;
						case DIRECTION_DOWN:
							// down ;
							holder[(row / 2) * 84 + column * 4 + 0] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0x70;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0x70;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0xF0;
							break ;
						case FOOD_BLOCK:
							holder[(row / 2) * 84 + column * 4 + 0] |=  0x60;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xF0;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0x60;
							break ;
					}
				} else {
					for (uint8_t i = 0; i < 4; i++) {
						if (base[row][column]) {
							holder[(row / 2) * 84 + column * 4 + i] |= 0xF0 ;
						}
					}
				}
			} else {
				// LSB
				if ((row == head_row && column == head_column) || (row == food_row && column == food_column)) {
					switch (base[row][column]) {
						case DIRECTION_RIGHT:
							// right
							holder[(row / 2) * 84 + column * 4 + 0] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0x9;
							break ;
						case DIRECTION_LEFT:
							// left
							holder[(row / 2) * 84 + column * 4 + 0] |=  0x9;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0xF;
							break ;
						case DIRECTION_UP:
							// upper ;
							holder[(row / 2) * 84 + column * 4 + 0] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xE;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xE;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0xF;
							break ;
						case DIRECTION_DOWN:
							// down ;
							holder[(row / 2) * 84 + column * 4 + 0] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0x7;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0x7;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0xF;
							break ;
						case FOOD_BLOCK:
							holder[(row / 2) * 84 + column * 4 + 0] |=  0x6;
							holder[(row / 2) * 84 + column * 4 + 1] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 2] |=  0xF;
							holder[(row / 2) * 84 + column * 4 + 3] |=  0x6;
							break ;
					}

				} else {
					for (uint8_t i = 0; i < 4; i++) {
						if (base[row][column]) {
							holder[(row / 2) * 84 + column * 4 + i] |= 0xF ;
						}
					}
				}
			}
		}
	}

	SPI2_Send_8_bit_pData(holder, 504) ;
}


void start_game_graph (void) {
	LCD_Full_Eraser() ;
	SPI2_Send_8_bit_pData(start_game_layour, 504) ;

	LCD_Command_Enabled() ;
	SPI2_Send_8_bit_data(FUNCTION_SET_BEGINNER | PD_CHIP_IN_ACTIVE | H_VALUE_FOR_DISPALY_OR_Y_X_ADDRESS) ;
	for (int i = 0; i < 3; i++) {
		delay_ms(500) ;
		SPI2_Send_8_bit_data(SET_DISPLAY_INVERSE_VIDEO_MODE) ;
		delay_ms(500) ;
		SPI2_Send_8_bit_data(SET_DISPLAY_NORMAL_MODE) ;
	}

	LCD_Data_Enabled() ;
}

void game_over_graph (void) {
	LCD_Full_Eraser() ;
	SPI2_Send_8_bit_pData(game_over_layout, 504) ;

	LCD_Command_Enabled() ;
	SPI2_Send_8_bit_data(FUNCTION_SET_BEGINNER | PD_CHIP_IN_ACTIVE | H_VALUE_FOR_DISPALY_OR_Y_X_ADDRESS) ;
	for (int i = 0; i < 5; i++) {
		delay_ms(500) ;
		SPI2_Send_8_bit_data(SET_DISPLAY_INVERSE_VIDEO_MODE) ;
		delay_ms(500) ;
		SPI2_Send_8_bit_data(SET_DISPLAY_NORMAL_MODE) ;
	}

	LCD_Data_Enabled() ;
}

void win_graph (void) {
	LCD_Full_Eraser() ;
	SPI2_Send_8_bit_pData(win_layout, 504) ;

	LCD_Command_Enabled() ;
	SPI2_Send_8_bit_data(FUNCTION_SET_BEGINNER | PD_CHIP_IN_ACTIVE | H_VALUE_FOR_DISPALY_OR_Y_X_ADDRESS) ;
	for (int i = 0; i < 5; i++) {
		delay_ms(500) ;
		SPI2_Send_8_bit_data(SET_DISPLAY_INVERSE_VIDEO_MODE) ;
		delay_ms(500) ;
		SPI2_Send_8_bit_data(SET_DISPLAY_NORMAL_MODE) ;
	}

	LCD_Data_Enabled() ;
}


void Buttons_Init (void) {
	// buttons pins
	// PD0 right
	// PD1 left
	// PD2 upper
	// PD3 lower
	__disable_irq() ;

	RCC->APB2ENR |= (0x4000) ;					// Enable SYSCFG's clock source

	RCC->AHB1ENR |= (0x8) ;						// Enable D port clock source

	GPIOD->MODER &= ~(0xFF) ; 					// set PD0, 1, 2 and 3's pins to input

	GPIOD->OTYPER &= ~(0xF) ;					// set PD0, 1, 2 and 3's output type to push_pull

	GPIOD->PUPDR &= ~(0xFF) ;					// reset PD0, 1, 2 and 3's pull-up/pull-down register
	GPIOD->PUPDR |= (0x55) ;					// set PD0, 1, 2 and 3's to pull-up

	SYSCFG->EXTICR[0] = (0x3333) ;				//


	EXTI->IMR |= (0xF) ;						// unmask the interrupts of PD0, 1, 2 and 3
	EXTI->RTSR &= ~(0xF) ;						// make sure that the interrupts of PD0, 1, 2 and 3's are only falling edge.
	EXTI->FTSR |= (0xF) ;

	NVIC_EnableIRQ(EXTI0_IRQn) ;
	NVIC_EnableIRQ(EXTI1_IRQn) ;
	NVIC_EnableIRQ(EXTI2_IRQn) ;
	NVIC_EnableIRQ(EXTI3_IRQn) ;

	__enable_irq() ;
}

void EXTI0_IRQHandler (void) {
	// right
	if (EXTI->PR & 0x1) {
		if (game_status == STOP) { game_status = START ; }

		if (move_status == WILL_MOVE) {
			if (base[head_row][head_column] == DIRECTION_LEFT) {
				// invalid move. snake will continue to move left.
				move_status = MOVE_DIRECTION_LEFT ;
			} else {
				move_status = MOVE_DIRECTION_RIGHT ;
			}
		}

		EXTI->PR |= (0x1) ;
	}
}

void EXTI1_IRQHandler (void) {
	// left
	if (EXTI->PR & 0x2) {
		if (move_status == WILL_MOVE) {
			if (game_status == STOP) { game_status = START ; }

			if (base[head_row][head_column] == DIRECTION_RIGHT) {
				// invalid move. snake will continue to move left.
				move_status = MOVE_DIRECTION_RIGHT ;
			} else {
				move_status = MOVE_DIRECTION_LEFT ;
			}
		}

		EXTI->PR |= (0x2) ;
	}
}

void EXTI2_IRQHandler (void) {
	// up
	if (EXTI->PR & 0x4) {
		if (move_status == WILL_MOVE) {
			if (game_status == STOP) { game_status = START ; }

			if (base[head_row][head_column] == DIRECTION_DOWN) {
				// invalid move. snake will continue to move left.
				move_status = MOVE_DIRECTION_DOWN ;
			} else {
				move_status = MOVE_DIRECTION_UP ;
			}
		}

		EXTI->PR |= (0x4) ;
	}
}

void EXTI3_IRQHandler (void) {
	// down
	if (EXTI->PR & 0x8) {
		if (move_status == WILL_MOVE) {
			if (game_status == STOP) { game_status = START ; }

			if (base[head_row][head_column] == DIRECTION_UP) {
				// invalid move. snake will continue to move left.
				move_status = MOVE_DIRECTION_UP ;
			} else {
				move_status = MOVE_DIRECTION_DOWN ;
			}
		}

		EXTI->PR |= (0x8) ;
	}
}



uint8_t game_over_layout[] = {
						0x80, 0xe0, 0xf8, 0xfc, 0x1c, 0x0e, 0x06, 0x07, 0x07, 0x03,
						0x03, 0x07, 0x07, 0x07, 0x0e, 0x0e, 0x3c, 0x3c, 0x30, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xf0, 0xfc, 0x3e,
						0x0e, 0x1e, 0x7e, 0xf8, 0xe0, 0x80, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0xfe, 0xfe, 0xfe, 0x3e, 0xfe, 0xf0, 0xc0,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xf0, 0xfc,
						0x3e, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfe,
						0xfe, 0xfe, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x06, 0x1f, 0x7f, 0xff, 0xf0, 0xc0, 0x80,
						0x00, 0x00, 0x00, 0x00, 0x06, 0x06, 0x06, 0x06, 0x06, 0x86,
						0xe6, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x80, 0xe0, 0xfc, 0x7f,
						0x1f, 0x1f, 0x19, 0x18, 0x18, 0x18, 0x18, 0x1b, 0x1f, 0x3f,
						0xfe, 0xf8, 0xc0, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff,
						0x00, 0x00, 0x03, 0x1f, 0x7f, 0xf8, 0xe0, 0x80, 0xe0, 0xf8,
						0x7e, 0x1f, 0x07, 0x01, 0x00, 0xff, 0xff, 0xff, 0x00, 0x00,
						0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0x07, 0x07, 0x07, 0x07,
						0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00,
						0x00, 0x01, 0x03, 0x03, 0x07, 0x07, 0x06, 0x06, 0x06, 0x06,
						0x06, 0x07, 0x03, 0x03, 0x01, 0x03, 0x07, 0x07, 0x00, 0x06,
						0x07, 0x07, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x01, 0x07, 0x07, 0x07, 0x04, 0x00,
						0x00, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
						0x07, 0x07, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07,
						0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x07,
						0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07, 0x07,
						0x07, 0x07, 0x00, 0x00, 0x00, 0x80, 0x80, 0xc0, 0xc0, 0xc0,
						0xc0, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0x00,
						0x00, 0x00, 0x00, 0x40, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0,
						0xc0, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
						0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00,
						0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
						0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xfe, 0xff, 0x0f,
						0x03, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x01, 0x03, 0x07, 0xff, 0xfe, 0xfc, 0xc0, 0x00, 0x03, 0x0f,
						0x7f, 0xfe, 0xf8, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x80, 0xe0,
						0xfc, 0xff, 0x1f, 0x07, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff,
						0xff, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0, 0xc0, 0xe0, 0xc0,
						0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xc0,
						0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xe0, 0xe1, 0xff,
						0x3f, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x03, 0x0f, 0x3f, 0x3c, 0x78, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0,
						0xc0, 0xc0, 0xc0, 0xe0, 0xe0, 0x70, 0x78, 0x3f, 0x1f, 0x07,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x07, 0x3f, 0xff, 0xf8,
						0xf0, 0xfc, 0x7f, 0x1f, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0xff, 0xff, 0xff, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
						0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00,
						0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x01, 0x01, 0x03, 0xff, 0xff, 0xfe, 0x80, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00 };

uint8_t start_game_layour[] = {
						0x00, 0x78, 0xfc, 0xfe, 0xce, 0x87, 0x87, 0x03, 0x03, 0x07,
						0x07, 0x07, 0x0e, 0x3e, 0x3c, 0x30, 0x00, 0x06, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x06, 0xfe, 0xfe, 0xfe, 0x06, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x06, 0x00, 0x00, 0xe0, 0xf8, 0x7e, 0x1e,
						0x0e, 0x7e, 0xfc, 0xe0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0xfe, 0xfe, 0xfe, 0x06, 0x06, 0x06, 0x06, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x9e, 0xfe, 0xfc, 0x70, 0x00, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x06, 0xfe, 0xfe, 0xfe, 0x06, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x06, 0x00, 0xf0, 0xf0, 0xc1, 0x83, 0x03,
						0x03, 0x03, 0x03, 0x07, 0x07, 0x06, 0x0e, 0x9e, 0xfc, 0xf8,
						0x70, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff,
						0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xf0, 0xfc, 0x7f,
						0x1f, 0x1b, 0x18, 0x18, 0x18, 0x18, 0x19, 0x1f, 0x3f, 0xfe,
						0xf8, 0xc0, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0x06, 0x06,
						0x06, 0x06, 0x06, 0x06, 0x06, 0x07, 0x0f, 0x7f, 0xfd, 0xf9,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff,
						0xff, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x01, 0x03, 0x03, 0x07, 0x07, 0x06, 0x06, 0x06, 0x06, 0x07,
						0x03, 0x03, 0x03, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x06,
						0x07, 0x07, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x01, 0x07, 0x07, 0x07, 0x00, 0x00, 0x07,
						0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0, 0xc0, 0xe0,
						0xe0, 0x60, 0x60, 0xe0, 0xe0, 0xe0, 0xc0, 0xc0, 0x80, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0,
						0xc0, 0xe0, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xc0,
						0xe0, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xe0,
						0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
						0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xfc, 0xfe, 0xff,
						0x07, 0x01, 0x01, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0,
						0xc1, 0xc3, 0xc7, 0xc7, 0xc4, 0x00, 0x00, 0x00, 0x00, 0x80,
						0xe0, 0xf8, 0x7e, 0x1f, 0x07, 0x01, 0x07, 0x1f, 0xfe, 0xf8,
						0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff,
						0x0f, 0x3f, 0xfc, 0xf0, 0x80, 0x00, 0x00, 0x00, 0x00, 0xc0,
						0xf0, 0xfe, 0x1f, 0x07, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00,
						0x00, 0xff, 0xff, 0xff, 0x60, 0x60, 0x60, 0x60, 0x60, 0x60,
						0x60, 0x60, 0x60, 0x60, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x07, 0x1f, 0x3f, 0x3c, 0x70, 0x60, 0xe0, 0xe0, 0xc0,
						0xc0, 0xc0, 0xe0, 0x60, 0x70, 0x38, 0x3f, 0xff, 0xff, 0x00,
						0xc0, 0xf0, 0xfc, 0x3f, 0x0f, 0x03, 0x03, 0x03, 0x03, 0x03,
						0x03, 0x03, 0x03, 0x03, 0x1f, 0x7f, 0xfc, 0xf0, 0xc0, 0x00,
						0x00, 0xff, 0xff, 0x7f, 0x00, 0x00, 0x00, 0x07, 0x1f, 0x7e,
						0xf8, 0xf8, 0x7f, 0x0f, 0x03, 0x00, 0x00, 0x00, 0xff, 0xff,
						0xff, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xe0, 0xe0,
						0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0xe0, 0x00,
						0x00, 0x00, 0x00, 0x00 };

uint8_t win_layout [] = {
						0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xc0, 0xc0, 0xc0, 0xc0,
						0xf8, 0xfc, 0xfe, 0xfe, 0xfe, 0xff, 0xff, 0xfe, 0xfe, 0xfe,
						0xfc, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0xf0, 0xf8, 0xfc, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe,
						0xfe, 0xfe, 0xfc, 0xf8, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x3f, 0x3f,
						0x7f, 0x7f, 0x7f, 0x7f, 0xff, 0xff, 0x7f, 0x7f, 0x7f, 0x7f,
						0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xff, 0xff, 0x7f, 0x7f,
						0x7f, 0x7f, 0x7f, 0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f,
						0x7f, 0x7f, 0x7f, 0x3f, 0x1f, 0x04, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x03, 0x04, 0x3c, 0x06, 0x03, 0x00, 0x0e,
						0x11, 0x21, 0x21, 0x21, 0x11, 0x0e, 0x00, 0x1f, 0x20, 0x20,
						0x20, 0x00, 0x1f, 0x00, 0x00, 0x01, 0x00, 0x3f, 0x01, 0x01,
						0x01, 0x0d, 0x32, 0x00, 0x3f, 0x25, 0x25, 0x25, 0x25, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x04, 0x04, 0xfc, 0x04, 0x04, 0x00, 0xfc, 0x10, 0x10,
						0x10, 0x10, 0xfc, 0x00, 0xfc, 0x94, 0x94, 0x94, 0x94, 0x00,
						0x00, 0x00, 0x00, 0x7c, 0x94, 0x94, 0x94, 0x14, 0x68, 0x00,
						0x7c, 0x94, 0x94, 0x94, 0x94, 0x00, 0x48, 0x1c, 0x94, 0x94,
						0xa4, 0x60, 0x04, 0x04, 0x04, 0x7c, 0x04, 0x04, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xf8, 0xfc, 0xfc,
						0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe,
						0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe,
						0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfc, 0xfc, 0xf8, 0xf0,
						0x00, 0x00, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x1f, 0x7f,
						0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0x7f, 0x3f, 0x0f,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
						0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x3f, 0x7f, 0xff, 0xff,
						0xff, 0xff, 0xff, 0xff, 0x7f, 0x7f, 0x1f, 0x03, 0x03, 0x03,
						0x03, 0x03, 0x01, 0x00 };
